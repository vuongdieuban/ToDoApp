{% load staticfiles %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>To Do App Project</title>
    <!--Bootstrap CSS-->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" href="{% static '/css/base.css' %}" />
</head>
<body>

    <div class="jumbotron jumbotron-fluid">
        <div class="container">
            <h1> To Do App </h1>
        </div>
    </div>

    {% include 'nav_bar.html' %}


    {% block content %}
    replace me
    {% endblock content %}


    <!--Bootstrap Jquery-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>


    {% block javascript %}
    <script>
        $(document).ready(function(){
            var $myForm = $(".my-ajax-form")
            $myForm.submit(function(event){
                event.preventDefault()      //prevent form to submit a normal way (synchronus way)
                var $formData = $(this).serialize()
                var $endpoint = $myForm.attr("data-url") || window.location.href
                console.log($formData)
                console.log($endpoint)
                $.ajax({
                    method:"POST",
                    url: $endpoint,
                    data: $formData,
                    success: handleFormSuccess,
                    error: handleFormError,
                })
    
                function handleFormSuccess(data, textStatus, jqXHR){
                    console.log(data)
                    console.log(textStatus)
                    console.log(jqXHR)
                    $myForm[0].reset();    //reset form data
                }
    
                function handleFormError(jqXHR, textStatus, errorThrown){
                    console.log(jqXHR)
                    console.log(textStatus)
                    console.log(errorThrown)
                }
            })
        })
    </script>
    {% endblock javascript %}

</body>
</html>